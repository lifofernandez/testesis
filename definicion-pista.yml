# Definición de PISTA valida (funciona)
# YAML types: yaml.org/type
# Ejemplo de documentacion: https://selinon.readthedocs.io/en/latest/yaml.html

CONSTANTES: !!map
  # Variables que se mantienen a lo largo de toda la pista

  nombre: !!str 
    # Título de la pista
    'Pista 1'

  instrumento: !!str 
    # Instrumentos soportados por music21
    # web.mit.edu/music21/doc/moduleReference/moduleInstrument.html
    'Piano'
  
base: &base !!map
  # 'Parametros por defecto para todas las unidades, pueden ser sobrescritos
  # Para que otra pita herede estas propiedades necesita <<: *base

  intervalos: !!seq 
    # Lista ordenada de intervalos a ser recorrida por el puntero de alturas
    [ 
      -12,-10,-9,-7,-5,-4,-2,
        0,  2, 3, 5, 7, 8,10,
       12, 14,15,17,19,20,22,
       24
    ]

  alturas: !!seq 
    # Puntero del set de intervalos
    [ 1, 3, 5, 8 ] 

  transportar: !!int 
    # Ajuste de alturas
    60 

  transponer: !!int
    # Ajuste de alturas pero dentro del set intervalos
    3

  voces: !!seq
    # Apilamiento de alturas 
    # desplaza nº de intervalo
    - [8] 
    - [5] 
    - [3]

  duraciones: !!seq 
    # Lista ordenada de duraciones
    [1]

  bpm: !!int 
   # Tempo, Pulsos Por Minuto
   62

  metro: !!str 
    # Clave de Compás
    4/4

  dinamicas: !!seq
   # Lista ordenada de dinámicas
   [ .5, .8]

  canal: !!int
   # Canal MIDI 
   1

  banco: !!str
   # Banco MIDI
   'GM'

  programa: !!str
    # Instrumento
    'Piano'
   

unidades: !!map
  # Paleta de unidades 
  a: &a !!map
    <<: *base
    metro: 2/4
    alturas: [1,3,5,7,8]
    duraciones: [1,.5,.5,1,1]
  b: &b !!map
    <<: *base
    metro: 6/8
    duraciones: [0.5]
    alturas: [6,7,8,7,0,9]
  b^: !!map
    <<: *b
    alturas: [6,7,0,9]
    dinamicas: [.2,.1]
  
  # Unidad de unidades (UoU)
  # "Pisan" parametros de unidades referidas 
  A: !!map
    unidades: ['a','b'] 
  B: &B !!map
    metro: 3/4
    unidades: ['a','b^']
  B^: !!map
    <<: *B
    voces: 0 
    bmp: 89
    unidades: ['b','a']
    dinamicas: [1]
  estrofa: !!map
    unidades: ['A','B','B^']
  estribo: !!map
    bpm: 100
    unidades: !!seq ['B','B^','a']

macroforma: !!seq 
  # 
  [
    'zapallo',
    'estrofa',
    'estribo',
  ]

#procesos:
  #transicion: 'parametro/proceso por definir'
