#!/usr/bin/env python
from argumentos import args
from main import EVENTOS, formato_tiempo
from pista import Pista
from midiutil import MIDIFile

"""
 Salida MIDI
"""
nombre_archivo = args.output
pistas_cantidad = Pista.cantidad 
midi_tracks = MIDIFile( pistas_cantidad ) 
for m in EVENTOS:
  #print(m)
  mu = getattr( midi_tracks, m[0] )( *m[1:] )
with open( nombre_archivo + ".mid", "wb" ) as archivo_midi:
   midi_tracks.writeFile( archivo_midi )


"""
TO DO:
    [ ] pasar intervalos a propiedad de segmento/unidad
    [ ] parametros de Segmento = art#0 de la unidad
    [ ] Parar tempo a canal global, propiedad de  no canal specifico
    [ ] Agregar Letra (texo)
    [ ] Excepciones main
    [ ] Agregar: Registro 
    [ ] YAML validation 
    [x] revisar metro
    [x] terminar midiUTIL 
    [x] Agregar: Segmento (grupo de articulaciones) 
"""
