#!/usr/bin/env python
from argumentos import args
from obra import EVENTOS
from pista import Pista
from midiutil import MIDIFile

"""
 Salida MIDI
"""
nombre_archivo = args.output
pistas_cantidad = Pista.cantidad 
midi_tracks = MIDIFile( pistas_cantidad ) 
for m in EVENTOS:
  mu = getattr( midi_tracks, m[0] )( *m[1:] )
with open( nombre_archivo + ".mid", "wb" ) as archivo_midi:
   midi_tracks.writeFile( archivo_midi )


"""
TO DO:
    [ ]  
    [ ] Excepciones main
    [ ] Parar tempo a canal global, propiedad de  no canal specifico
    [ ] YAML validation 
    [ ] Procesos de unidad/segmento : "stacato" (acortar notas)
    [x] agregar primer segmento de la pista
    [x] agregar primer  articulacion del segmento
    [x] pasar intervalos a propiedad de segmento/unidad
    [x] parametros de Segmento = art#0 de la unidad
    [x] Agregar Letra (texo)
    [x] Agregar: Registro 
    [x] revisar metro
    [x] terminar midiUTIL 
    [x] Agregar: Segmento (grupo de articulaciones) 
"""
# https://docs.python.org/3/reference/import.html#regular-packages
# https://realpython.com/run-python-scripts/
# https://setuptools.readthedocs.io/en/latest/setuptools.html
# https://docs.python.org/3/reference/import.html#namespace-packages
# https://stackoverflow.com/questions/1471994/what-is-setup-py
